<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Dashboard</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@latest/dist/tailwind.min.css" rel="stylesheet" />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Audiowide&display=swap" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
  <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

  <style>
    body {
      background: radial-gradient(circle at top left, #120024, #220044, #0a0014);
      color: #f5f3ff;
      font-family: 'Poppins', sans-serif;
      min-height: 100vh;
    }

    .header-glow {
      box-shadow: 0 0 15px rgba(150, 0, 255, 0.4), 0 0 25px rgba(128, 0, 255, 0.2);
    }

    .fa-futbol {
      animation: spin 3s linear infinite;
    }

    .top-links {
      margin: 0.5rem 0.3rem;
      display: flex;
      justify-content: space-between;
      gap: 0.5rem;
    }

    .top-links a {
      flex: 1;
      background: rgba(126, 34, 206, 0.4);
      border: 1px solid rgba(126, 34, 206, 0.25);
      box-shadow: 0 0 15px rgba(128, 0, 255, 0.2);
      color: #fff;
      font-size: 0.8rem;
      font-weight: 600;
      padding: 0.3rem;
      border-radius: 0.3rem;
      text-align: center;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.4rem;
      transition: all 0.3s ease;
    }

    .top-links a:hover {
      background: rgba(126, 34, 206, 0.4);
      color: #facc15;
    }

    .user-icon-glow {
      box-shadow: 0 0 15px 4px rgba(175, 85, 247, 0.8);
    }

    #sidebar {
      transition: transform 0.3s ease-in-out;
      transform: translateX(-100%);
      background: radial-gradient(circle at top left, #120024, #220044, #0a0014);
      border-right: 1px solid rgba(126, 34, 206, 0.4);
      box-shadow: 0 0 30px rgba(128, 0, 255, 0.2);
      overflow-y: auto;
    }

    #sidebar.active {
      transform: translateX(0);
    }

    #overlay {
      transition: opacity 0.3s ease-in-out;
      opacity: 0;
      pointer-events: none;
    }

    #overlay.active {
      opacity: 0.5;
      pointer-events: all;
    }

    #sidebar nav a {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 8px 10px;
      border-radius: 8px;
      background-color: rgba(40, 0, 90, 0.45);
      transition: all 0.3s ease;
      color: #ddd;
    }

    #sidebar nav a:hover {
      background-color: rgba(255, 215, 0, 0.15);
      color: #ffd700;
      transform: scale(1.02);
    }

    #sidebar nav a i {
      color: #c084fc;
      transition: color 0.3s ease;
    }

    #sidebar nav a:hover i {
      color: #ffd700;
    }

    #sidebar nav a.active {
      background-color: rgba(255, 215, 0, 0.2);
      color: #ffd700;
      border-left: 3px solid #ffd700;
    }

    .sidebar-profile img {
      width: 72px;
      height: 72px;
      object-fit: cover;
      border-radius: 9999px;
      border: 3px solid rgba(255, 255, 255, 0.08);
    }

    .sidebar-username {
      font-weight: 600;
      color: #f3f4f6;
      font-size: 0.95rem;
      text-align: center;
    }

    .rank-badge {
      background: linear-gradient(90deg, #ffd700, #ff9f00);
      color: #1e1796;
      font-weight: 700;
      font-size: 0.85rem;
      border-radius: 9999px;
      padding: 2px 10px;
      text-align: center;
      margin-top: 4px;
      box-shadow: 0 0 8px rgba(255, 215, 0, 0.6);
    }

    .balance-badge {
      background: linear-gradient(90deg, #0099fd, #0099fd);
      color: #ffff;
      font-weight: 700;
      font-size: 0.85rem;
      border-radius: 9999px;
      padding: 2px 10px;
      text-align: center;
      margin-top: 6px;
      box-shadow: 0 0 8px rgba(0, 255, 204, 0.6);
    }

    .match-card {
      position: relative;
      overflow: hidden;
      border-radius: 7px;
      border: solid 1px #7e22ce;
      padding: 5px 5px;
      box-shadow: 0 0 25px rgba(128, 0, 255, 0.25);
      margin-bottom: 1rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      min-height: 120px;
      background: linear-gradient(145deg, rgba(26, 0, 51, 0.7), rgba(42, 0, 80, 0.7));
    }

    .match-card::before {
      content: '';
      position: absolute;
      margin-top: 10px;
      inset: 0;
      background:
        linear-gradient(rgba(42, 0, 80, 0.4), rgba(42, 0, 80, 0.4)),
        url('9864.png') center/cover no-repeat;
      filter: blur(2px) brightness(0.6);
      z-index: 0;
    }

    .match-card > * {
      position: relative;
      z-index: 1;
    }

    .league-badge {
      position: absolute;
      top: 0px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(126, 34, 206, 0.25);
      color: #f3f0f5;
      padding: 2px 10px;
      font-size: 0.60rem;
      font-weight: 600;
      border: 1px solid rgba(126, 34, 206, 0.25);
      box-shadow: 0 6px 18px rgba(34, 0, 68, 0.35);
      backdrop-filter: blur(4px);
      letter-spacing: 0.4px;
      clip-path: polygon(10% 0%, 90% 0%, 100% 0%, 96% 100%, 4% 100%, 0% 0%);
      text-align: center;
      white-space: nowrap;
      text-transform: uppercase;
    }

    .team-stack {
      margin-top: 10px;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 1px;
      min-width: 100px;
    }

    .team-name {
      font-size: 0.62rem;
      font-weight: 600;
      color: #fff;
      text-align: center;
      text-shadow: 0 1px 6px rgba(0, 0, 0, 0.6);
      text-transform: uppercase;
    }

    .team-logo {
      width: 44px;
      height: 44px;
      margin-top: 7px;
      object-fit: cover;
      background: rgba(126, 34, 206, 0.25);
      border-radius: 9999px;
      border: 2px solid #9746cceb;
      box-shadow: 0 6px 18px rgba(34, 0, 68, 0.35);
    }

    .score-box {
      min-width: 110px;
      text-align: center;
      margin-top: 20px;
    }

    .date-box {
      font-size: 11px;
      font-weight: 600;
      color: #dec24c;
      margin-top: 4px;
    }

    .matchday-box {
      width: 60px;
      font-size: 8px;
      font-weight: 600;
      background: rgba(126, 34, 206, 0.3);
      color: #fff;
      padding: 0px 2px;
      border-radius: 4px;
      border: 1px solid #7e22ce;
      text-align: center;
      margin: 2px auto 0 auto;
      display: block;
      text-transform: uppercase;
    }

    .Rating-box {
      display: flex;
      justify-content: center;
      align-items: center;
      width: 40px;
      height: 15px;
      padding: 1px;
      font-size: 8px;
      font-weight: 700;
      text-transform: uppercase;
      background: rgba(250, 204, 21, 0.06);
      color: #facc15;
      border: 1px solid rgba(250, 204, 21, 0.12);
      border-radius: 999px;
      box-shadow: 0 4px 10px rgba(40, 10, 80, 0.18);
      backdrop-filter: blur(3px);
    }

    .nav-bottom {
      box-shadow: 0 -2px 20px rgba(120, 0, 255, 0.3);
    }

    .nav-box {
      background: rgba(126, 34, 206, 0.25);
    }

    .nav-item {
      color: #d0d1d1;
      transition: all 0.3s ease;
    }

    .nav-item i {
      color: #c084fc;
      transition: all 0.3s ease;
    }

    .nav-item:hover i {
      color: #facc15;
    }

    @media (min-width: 640px) {
      main {
        max-width: 560px;
      }
      .team-logo {
        width: 48px;
        height: 48px;
      }
    }
  </style>
</head>

<body>

  <header class="bg-gradient-to-r from-[#0a001f] via-[#2d0055] to-[#0a001f] w-full max-w-md shadow-md py-2 px-3 mx-auto border-b border-purple-500 flex items-center justify-between header-glow rounded-b-2xl">
    <div class="flex items-center space-x-2">
      <img src="dls25.jpg" alt="Logo" class="w-8 h-8 rounded-full border border-purple-500 shadow-md"/>
      <h2 class="text-xl font-bold bg-gradient-to-r from-yellow-300 via-pink-300 to-yellow-300 bg-clip-text text-transparent" style="font-family: 'Audiowide', cursive;">DSL TOUR</h2>
    </div>
    <div>
      <button id="menuButton">
        <i class="fa-solid fa-bars text-white text-xl"></i>
      </button>
    </div>
  </header>

  <section class="max-w-md mx-auto top-links px-3">
    <a href="fixers.html">
      <i class="fa-solid fa-trophy"></i> Tour Match
    </a>
    <a href="point-table.html">
      <i class="fa-solid fa-table"></i> Point Table
    </a>
    <a href="rules.html">
      <i class="fa-solid fa-book"></i> Tour Rules
    </a>
  </section>

  <div class="px-3">
  <section id="bannerToggle" class="bg-gradient-to-r from-purple-900 via-blue-800 to-purple-900 text-center py-1 px-1 shadow-lg rounded-sm border border-blue-500 mb-3">
    <!-- ✅ Registration Countdown -->
    <div class="flex justify-center gap-2">
      <h4 class="text-xs text-blue-200 font-semibold mb-1">Registration Close Time</h4>
      <div
        class="bg-black flex justify-center items-center  border border-yellow-400 font-semibold rounded-sm h-4 p-0.5 text-yellow-300 text-xs shadow-[0_0_15px_rgba(255,215,0,0.6)] tracking-widest"
        id="countdown">
        0D:0H:0M:0S
      </div>
    </div>
    <h3 class="text-xs font-bold
      bg-gradient-to-r from-yellow-400 to-pink-400 bg-clip-text text-transparent">DSL SESSION-<span id="sessionDisplslay"></span> REGISTRATION OPEN NOW <a href="reg-form.html"
        class="inline-block bg-gradient-to-r from-yellow-400 to-yellow-400 text-black text-xs font-semibold px-1 mt-1 rounded-sm shadow-md hover:scale-105  transition-transform duration-300">
        Open Form
      </a></h3>

  </section>
  </div>

  <!-- Sidebar -->
  <div id="overlay" class="fixed inset-0 bg-black z-40"></div>
  <aside id="sidebar" class="fixed top-0 left-0 w-52 h-full bg-black z-50 shadow-xl border-r border-gray-700 overflow-y-auto">
    <div class="flex items-center justify-between p-2.5 border-b border-gray-700">
      <h2 class="text-lg font-bold text-yellow-300">Menu</h2>
      <button id="closeSidebar" class="bg-gray-800 px-2 rounded-sm text-gray-300 text-xl hover:text-yellow-400">
        <i class="fa-solid fa-xmark"></i>
      </button>
    </div>

    <!-- User Info -->
    <div class="sidebar-profile flex flex-col items-center py-4 border-b border-gray-700 overflow-y-auto">
      <img id="userPhoto" src="OIP.webp" alt="User Photo"
        class="user-icon-glow w-16 h-16 rounded-full object-cover" />
      <h3 id="username" class="text-sm font-semibold text-yellow-gray-00 mt-1">...</h3>
      <div class="rank-badge text-xs">Rank Level:<span class="ml-1">74</span></div>
      <div class="balance-badge">Gaming Balance:<span id="balance" class="ml-1">৳</span></div>
    </div>

    <nav class="p-4 space-y-3">
      <a href="index.html" class="active">
        <i class="fa-solid fa-house"></i> <span>Home</span>
      </a>
      <a href="friendly-match.html">
        <i class="fa-solid fa-gamepad"></i> <span>Friendly Match</span>
      </a>
      <a href="lottery.html">
        <i class="fa-solid fa-dice"></i> <span>Lottery</span>
      </a>
      <a href="team-rank.html">
        <i class="fa-solid fa-ranking-star"></i> <span>Ranking</span>
      </a>
      <a href="reg-history.html">
        <i class="fa-solid fa-clock-rotate-left"></i> <span>Reg History</span>
      </a>
      <a href="https://m.me/j/AbaKcMi10_nTYK4E/">
        <i class="fa-solid fa-headset"></i> <span>Support</span>
      </a>
      <a href="#" id="logoutBtn" class="text-red-400 hover:text-red-500 bg-red-900/30 hover:bg-red-700/30">
        <i class="fa-solid fa-right-from-bracket"></i> <span>Logout</span>
      </a>
    </nav>
  </aside>

  <!-- Main Content -->
  <main class="max-w-md mx-auto px-3 mb-20">
    <h3 class="text-xs text-gray-200 font-semibold mb-3 border-b border-purple-400 pb-1 flex items-center gap-2 uppercase">
          <span class="flex justify-center items-center bg-purple-500 bg-opacity-20 p-1.5 rounded-md border border-purple-400 shadow-sm h-5 w-6">
            <i class="fa-solid fa-futbol text-purple-200 text-sm"></i>
          </span>
          dsl live match
    </h3>
    <!-- Fixers List Section -->
    <div id="fixers-list" class="space-y-6">
      <p class="text-center text-gray-400">Loading...</p>
    </div>
  </main>

  <!-- Bottom Navigation -->
  <nav class="nav-bottom fixed bg-gradient-to-r from-[#0a001f] via-[#2d0055] to-[#0a001f] bottom-0 left-0 right-0 flex justify-around items-center py-2 rounded-t-2xl text-white h-16 sm:h-14 sm:px-2 z-50 border-t border-purple-500">
    <a href="index.html" class="nav-item flex flex-col items-center text-xs font-semibold no-underline">
      <div class="nav-box w-9 h-9 rounded-full mb-1 flex items-center justify-center border border-purple-500">
        <i class="fa-solid fa-house text-lg"></i>
      </div>
      Home
    </a>
    <a href="shop.html" class="nav-item flex flex-col items-center text-xs font-semibold no-underline">
      <div class="nav-box w-9 h-9 rounded-full mb-1 flex items-center justify-center border border-purple-500">
        <i class="fa-solid fa-cart-plus text-lg"></i>
      </div>
      DLS Shop
    </a>
    <a href="index.html" class="nav-item flex flex-col items-center text-xs font-semibold no-underline">
      <div class="nav-box w-9 h-9 rounded-full mb-1 flex items-center justify-center border border-purple-500">
        <i class="fa-solid fa-trophy text-lg"></i>
      </div>
      Tour Match
    </a>
    <a href="team-rank.html" class="nav-item flex flex-col items-center text-xs font-semibold no-underline">
      <div class="nav-box w-9 h-9 rounded-full mb-1 flex items-center justify-center border border-purple-500">
        <i class="fa-solid fa-ranking-star text-lg"></i>
      </div>
      Ranking
    </a>
    <a href="profile.html" class="nav-item flex flex-col items-center text-xs font-semibold no-underline">
      <div class="nav-box w-9 h-9 rounded-full mb-1 flex items-center justify-center border border-purple-500">
        <i class="fa-solid fa-user text-lg"></i>
      </div>
      Profile
    </a>
  </nav>

   <script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
import {
  getFirestore, collection, onSnapshot, query, getDocs, doc, getDoc, updateDoc
} from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";
import {
  getAuth, setPersistence, browserLocalPersistence, onAuthStateChanged, signOut
} from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";

// ✅ Firebase Config
const firebaseConfig = {
  apiKey: "AIzaSyDooTNeDHoWUU9nLxYxyBIhewydt7Xl_M0",
  authDomain: "dlstournament-31ac1.firebaseapp.com",
  databaseURL: "https://dlstournament-31ac1-default-rtdb.firebaseio.com",
  projectId: "dlstournament-31ac1",
  storageBucket: "dlstournament-31ac1.appspot.com",
  messagingSenderId: "874377019055",
  appId: "1:874377019055:web:6e38db2ec7f0d541d2de5a",
  measurementId: "G-0DGFJEV6GL"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);
const auth = getAuth(app);

await setPersistence(auth, browserLocalPersistence);

let teamPhotos = {};
let hiddenMatchdays = {};
let currentUserId = null;
let fixersData = [];
let countdownInterval = null;
let activeDocId = null;
let teamRatings = {}; // ✅ Store ratings from playerlist

// ✅ Load team photos + ratings from playerlist
async function loadTeamPhotosAndRatings() {
  const snap = await getDocs(collection(db, "playerlist"));
  snap.forEach(docSnap => {
    const data = docSnap.data();
    if (data.teamName) {
      const teamKey = data.teamName.trim().toLowerCase();
      if (data.photoUrl) teamPhotos[teamKey] = data.photoUrl;
      if (data.idRating) teamRatings[teamKey] = data.idRating;
    }
  });
}

// ✅ Balance realtime listener
function subscribeUserBalance() {
  if (!currentUserId) return;
  const userRef = doc(db, "users", currentUserId);

  onSnapshot(userRef, (userSnap) => {
    if (userSnap.exists()) {
      const data = userSnap.data();
      const balanceElement = document.getElementById("balance");
      if (balanceElement) {
        balanceElement.innerText = `৳${data.balance ?? 0}`;
      }
    }
  });
}

// ✅ Date Format
function formatDateAndTime(dateStr) {
  const date = new Date(dateStr);
  const day = date.getDate().toString().padStart(2, "0");
  const month = date.toLocaleString("default", { month: "short" }).toUpperCase();
  const year = date.getFullYear();
  return `${day}, ${month}, ${year}`;
}

// ✅ Auth Listener
onAuthStateChanged(auth, async (user) => {
  if (!user) return window.location.href = "login.html";
  currentUserId = user.uid;

  const userRef = doc(db, "users", user.uid);
  const userSnap = await getDoc(userRef);

  if (userSnap.exists()) {
    const data = userSnap.data();

    document.getElementById("username").innerText = data.username || user.displayName || "User";
    document.getElementById("userPhoto").src = data.photoUrl || user.photoURL || "default-profile.png";
    hiddenMatchdays = data.hiddenMatchdays || {};

    // ✅ Balance display
    document.getElementById("balance").innerText = `৳${data.balance ?? 0}`;

  } else {
    document.getElementById("username").innerText = user.displayName || "User";
    document.getElementById("userPhoto").src = user.photoURL || "default-profile.png";
    hiddenMatchdays = {};
  }

  subscribeUserBalance(); // ✅ Listen realtime balance
  await loadTeamPhotosAndRatings();
  subscribeHiddenMatchdays();
  subscribeFixers();
  subscribeBannerStatus();
});

// ✅ Listen for Hidden Matchdays
function subscribeHiddenMatchdays() {
  const userRef = doc(db, "users", currentUserId);
  onSnapshot(userRef, (snap) => {
    hiddenMatchdays = snap.exists() ? snap.data().hiddenMatchdays || {} : {};
    renderFixers();
  });
}

// ✅ Listen for Fixers Collection
function subscribeFixers() {
  const fixersRef = collection(db, "fixers");
  onSnapshot(query(fixersRef), (snapshot) => {
    fixersData = [];
    snapshot.forEach(docSnap => fixersData.push(docSnap.data()));
    renderFixers();
  });
}

// ✅ Update Session Display
function updateSessionDisplay(sessionName) {
  const sessionDisplay = document.getElementById("sessionDisplslay");
  if (sessionDisplay) sessionDisplay.textContent = sessionName || "";
}

// ✅ Banner + Countdown
function subscribeBannerStatus() {
  const bannerToggle = document.getElementById("bannerToggle");
  const countdownEl = document.getElementById("countdown");
  const settingsRef = collection(db, "toursetting");

  onSnapshot(settingsRef, (snapshot) => {
    let activeDoc = null;
    activeDocId = null;

    snapshot.forEach(docSnap => {
      const data = docSnap.data();
      if (data.isActive === true) {
        activeDoc = data;
        activeDocId = docSnap.id;
      }
    });

    if (activeDoc) {
      bannerToggle.style.display = "block";
      updateSessionDisplay(activeDoc.session);
      if (activeDoc.endTime) startCountdown(activeDoc.endTime, countdownEl);
      else countdownEl.textContent = "N/A";
    } else {
      bannerToggle.style.display = "none";
      updateSessionDisplay("");
      clearInterval(countdownInterval);
    }

    renderFixers();
  });
}

// ✅ Countdown Logic
function startCountdown(endTimeStr, element) {
  clearInterval(countdownInterval);
  const endTime = new Date(endTimeStr).getTime();

  async function deactivateTournament() {
    if (activeDocId) {
      try {
        const tourRef = doc(db, "toursetting", activeDocId);
        await updateDoc(tourRef, { isActive: false });
      } catch (error) {
        console.error("Deactivate failed:", error);
      }
    }
  }

  function updateCountdown() {
    const now = new Date().getTime();
    const distance = endTime - now;

    if (distance <= 0) {
      clearInterval(countdownInterval);
      element.textContent = "0D:0H:0M:0S";
      deactivateTournament();
      return;
    }

    const days = Math.floor(distance / (1000 * 60 * 60 * 24));
    const hours = Math.floor((distance / (1000 * 60 * 60)) % 24);
    const minutes = Math.floor((distance / (1000 * 60)) % 60);
    const seconds = Math.floor((distance / 1000) % 60);

    if (days > 0) {
      element.textContent = `${days}D:${hours.toString().padStart(2, "0")}H:${minutes.toString().padStart(2, "0")}M:${seconds.toString().padStart(2, "0")}S`;
    } else {
      element.textContent = `${hours.toString().padStart(2, "0")}H:${minutes.toString().padStart(2, "0")}M:${seconds.toString().padStart(2, "0")}S`;
    }
  }

  updateCountdown();
  countdownInterval = setInterval(updateCountdown, 1000);
}

// ✅ Render Fixers
function renderFixers() {
  const fixersContainer = document.getElementById("fixers-list");
  if (!fixersData.length) {
    fixersContainer.innerHTML = `<p class="text-center text-gray-400">No fixers available.</p>`;
    return;
  }

  const todayStr = new Date().toISOString().split("T")[0];
  const todayMatches = fixersData.filter(fix => fix.date && new Date(fix.date).toISOString().split("T")[0] === todayStr);

  if (!todayMatches.length) {
    fixersContainer.innerHTML = `<p class="text-center text-gray-400">No matches scheduled for today.</p>`;
    return;
  }

  const matchdaysMap = {};
  todayMatches.forEach(fix => {
    const md = fix.matchday || "Matchday-Unknown";
    if (!matchdaysMap[md]) matchdaysMap[md] = [];
    matchdaysMap[md].push(fix);
  });

  const sortedMatchdays = Object.keys(matchdaysMap).sort();
  let html = "";

  sortedMatchdays.forEach((md, index) => {
    const matchdayId = `match-day-${index + 1}`;
    if (hiddenMatchdays[matchdayId]) return;

    matchdaysMap[md]
      .sort((a, b) => a.groupName.localeCompare(b.groupName) || a.team1.localeCompare(b.team1))
      .forEach(match => {
        const team1Key = match.team1.trim().toLowerCase();
        const team2Key = match.team2.trim().toLowerCase();
        const team1Img = teamPhotos[team1Key] || "dls25.jpg";
        const team2Img = teamPhotos[team2Key] || "dls25.jpg";
        const t1GoalVal = match.team1Goal ?? "-";
        const t2GoalVal = match.team2Goal ?? "-";
        const formattedDate = formatDateAndTime(match.date);
        const team1Rating = teamRatings[team1Key] || "N/A";
        const team2Rating = teamRatings[team2Key] || "N/A";

        html += `
        <div class="match-card">
          <div class="league-badge">DLS Champion League (DSL Session-10)</div>
          <div class="team-stack">
            <img src="${team1Img}" class="team-logo" alt="${match.team1}">
            <div class="team-name">${match.team1}</div>
            <div class="Rating-box font-semibold">⭐ ${team1Rating}</div>
          </div>
          <div class="score-box text-center">
            <p class="text-3xl font-bold">${t1GoalVal} : ${t2GoalVal}</p>
            <p class="date-box text-xs font-semibold mb-1">${formattedDate}</p>
            <p class="matchday-box">${md}</p>
          </div>
          <div class="team-stack">
            <img src="${team2Img}" class="team-logo" alt="${match.team2}">
            <div class="team-name">${match.team2}</div>
            <div class="Rating-box font-semibold">⭐ ${team2Rating}</div>
          </div>
        </div>`;
      });
  });

  fixersContainer.innerHTML = html;
}

// ✅ Sidebar toggle
const sidebar = document.getElementById("sidebar");
const overlay = document.getElementById("overlay");
const menuButton = document.getElementById("menuButton");
const closeSidebar = document.getElementById("closeSidebar");

menuButton.addEventListener("click", () => {
  sidebar.classList.add("active");
  overlay.classList.add("active");
});

closeSidebar.addEventListener("click", () => {
  sidebar.classList.remove("active");
  overlay.classList.remove("active");
});

overlay.addEventListener("click", () => {
  sidebar.classList.remove("active");
  overlay.classList.remove("active");
});

// ✅ Logout
logoutBtn.addEventListener("click", async () => {
  const result = await Swal.fire({
    title: "Logout?",
    text: "Are you sure you want to log out?",
    icon: "warning",
    showCancelButton: true,
    confirmButtonColor: "#d33",
    cancelButtonColor: "#3085d6",
    confirmButtonText: "Yes, Logout"
  });

  if (result.isConfirmed) {
    try {
      await signOut(auth);
      Swal.fire({
        icon: "success",
        title: "Logged out successfully!",
        showConfirmButton: false,
        timer: 1500
      });
      setTimeout(() => {
        window.location.href = "login.html";
      }, 1500);
    } catch (error) {
      Swal.fire("Error", "Failed to log out. Please try again.", "error");
    }
  }
});
</script>


</body>
</html>
